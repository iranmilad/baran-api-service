{
  "summary": "اضافه کردن تنظیم default_warehouse_code به سیستم",
  "description": "تنظیم جدید default_warehouse_code به جدول user_settings، مدل UserSetting و کنترلر UserSettingController اضافه شد",
  "changes": {
    "migration": {
      "file": "2025_08_19_000001_add_default_warehouse_code_to_user_settings_table.php",
      "description": "میگریشن جدید برای اضافه کردن فیلد default_warehouse_code",
      "field_definition": {
        "name": "default_warehouse_code",
        "type": "string(100)",
        "nullable": true,
        "position": "after shipping_product_unique_id"
      }
    },
    "model": {
      "file": "app/Models/UserSetting.php",
      "changes": [
        "اضافه کردن 'default_warehouse_code' به آرایه fillable"
      ],
      "note": "فیلد جدید به صورت خودکار در toPluginArray و fromPluginArray پردازش می‌شود چون جزو invoice_settings نیست"
    },
    "controller": {
      "file": "app/Http/Controllers/UserSettingController.php",
      "changes": [
        "اضافه کردن مقدار پیش‌فرض خالی در متد get",
        "اضافه کردن 'default_warehouse_code' به allowedKeys",
        "اضافه کردن validation rule: 'nullable|string|max:100'"
      ]
    }
  },
  "field_specifications": {
    "name": "default_warehouse_code",
    "type": "string",
    "max_length": 100,
    "nullable": true,
    "default_value": "'' (خالی)",
    "validation": "nullable|string|max:100"
  },
  "api_behavior": {
    "get_settings": {
      "default_response": "'' (رشته خالی)",
      "description": "اگر تنظیمات موجود نباشد، مقدار پیش‌فرض خالی برگردانده می‌شود"
    },
    "update_settings": {
      "accepts": "رشته تا 100 کاراکتر یا null",
      "validation": "اختیاری، حداکثر 100 کاراکتر"
    }
  },
  "database_status": {
    "migration_executed": true,
    "batch_number": 8,
    "table_updated": "user_settings table now includes default_warehouse_code column"
  },
  "testing": {
    "validation_test": "passed",
    "field_length_test": "passed (14 chars tested)",
    "default_value_test": "passed"
  },
  "usage_example": {
    "plugin_request": {
      "default_warehouse_code": "WAREHOUSE-MAIN"
    },
    "api_response": {
      "success": true,
      "data": {
        "default_warehouse_code": "WAREHOUSE-MAIN"
      }
    }
  },
  "status": "completed",
  "notes": [
    "میگریشن با موفقیت اجرا شد",
    "تمام validation rules درست تنظیم شدند",
    "فیلد در API endpoints در دسترس است",
    "سازگاری با سیستم موجود حفظ شده"
  ]
}
